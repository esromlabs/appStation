<!doctype html>
<html lang="en">
    <head>
        <style>
        #graph_vis {
            height: 400px;
            width:  600px;
            border: 1px solid #E4D9C6;
            margin-left: 20px;
        }
        #graph_storage {
            margin-left: 28px;
        }
        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Graphlet Demonstration</title>
        <!--  script type="text/javascript" src="js/jquery.min.js"></script -->
        <script src="//code.jquery.com/jquery-1.10.2.js"></script>
		<script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
        <script type="text/javascript" src="bower_components/cytoscape/dist/cytoscape.js"></script>
        <script type="text/javascript" src="js/graphlet_vis.js"></script>
        <script type="text/javascript" src="js/graphlet_storage.js"></script>
        <script type="text/javascript" src="js/graphlet_examples.js"></script>
		<script type="text/javascript" src="js/graphlet_query.js"></script>
        <script type="text/javascript" src="js/graphlet_procedural_run.js"></script>
        
        <script type="text/javascript" src="js/json2html/json2html-0.4.1.js"></script>
        <script type="text/javascript" src="js/json2html/jquery.json2html.js"></script>
        <script type="text/javascript" src="js/jsoneditor.js"></script>
        <script>
		$(function() {
			nodes_editor = new JSONEditor($('#node_editor')[0], {
				  theme: 'bootstrap3',
				  schema: {
					"type": "array",
					"title": "All Selected Nodes",
					"uniqueItems": true,
					"items": {
					  "type": "object",
					  "title": "Selected Node",
					  "headerTemplate": "{{ self.id }} - {{ self.name }} ({{ self.node_type }})",
					  "properties": {
						"name": {
						  "type": "string",
						  "default": "Start"
						},
						"node_type": {
						  "required": true,
						  "type": "string",
						  "default":"process",
						  "enum": ['io', 'process', 'data']
						},
						"id": {
						  "type": "string",
						  "options": {"hidden": true}
						},
						"data": {
						  "type": "object"
						},
						"io": {
						  "type": "object",
						  "properties": {
							  "selector":{"type":"string"},
							  "event":{"type":"string"}
						  }
						},
						"process": {
						  "type": "array",
						  "items": {"type":"string"} 
						},
						"view": {
						  "type":"object",
						  "properties": {
							"position": {
								"type": "object",
								"properties": {"x":{"type":"integer"}, "y":{"type":"integer"}}
							}  
						  }
						} 
					  },
					  "format": "grid"
					}
				},
				disable_array_add:false,
				disable_array_delete:false,
				disable_array_reorder:true,
				disable_edit_json:true,
				disable_properties:false
			  });
			edges_editor = new JSONEditor($('#edge_editor')[0], {
				  theme: 'bootstrap3',
				  schema: {
					"type": "array",
					"title": "Selected Edges",
					"items": {
					  "type": "object",
					  "title": "Selected Edge",
					  "headerTemplate": "{{ self.source }} -> {{ self.target }} ({{ self.edge_type }}) {{ self.name }} ",
					  "properties": {
						 "name": {
						  "type": "string"
						},
						"source": {
						  "type": "string"
						},
						"target": {
						  "type": "string"
						},
						"edge_type": {
						  "type": "string",
						  "enum": ['get', 'set', 'flo', 'sub', 'pub']
						},
						"guard": {
						  "type": "string"
						},
						"weight": {
						  "type": "integer"
						} 
					  },
					  "format": "grid"
					}
				},
				disable_array_add:true,
				disable_array_delete:true,
				disable_array_reorder:true,
				disable_edit_json:true,
				disable_properties:true
			  });
		});
        </script>
        <!-- Bootstrap -->
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
        <script src="bootstrap/js/bootstrap.min.js"></script>
    </head>
<body>
    <h1>Graphlet Demonstration</h1>
    <div class="row">
      <div class="span8">
          <div id="graph_vis"></div>
          <div class="row">
              <div class="span1" id="graph_storage"></div>
              <div class="span2" id="graph_title">No graph loaded ;P</div>
              <div class="span4">
                <button id="view_all" type="button" class="btn btn-primary">View All</button> 
                <button id="view_zoom_1" type="button" class="btn btn-primary">Zoom 1.0</button>
              </div>
          </div>
      </div>
      
      <div class="span8">
        <div class="row">
          <div class="span3" id="storage_ctl"></div>
          <div class="span3">
            <div id="ui_mode_2" class="btn-group ui_mode" data-toggle="buttons-radio">
              <button id="edit" type="button" class="btn btn-primary active">Edit</button>
              <button id="run" type="button" class="btn btn-primary">Run</button>
            </div>
          </div>
        </div>
        <div id="edit_mode_ui" style="display: none;">
            <div class="row"><div class="span2"><button id="add_node" type="button" class="btn btn-primary">add node</button></div>
                             <div class="span2"><button id="add_edge" type="button" class="btn btn-primary" data-toggle="button">add edge</button></div>
            </div>
            <div class="row"><div class="span2"><button id="delete_node" type="button" class="btn btn-primary">delete node</button></div>
                             <div class="span2"><button id="delete_edge" type="button" class="btn btn-primary">delete edge</button></div>
            </div>
            <div><h4 id="node_input_header">Node data (<span>0</span> Selected)</h4>
                <div id="node_editor">
                </div>
            </div>
            <div><h4 id="edge_input_header">Edge data (<span>0</span> Selected)</h4>
                <div id="edge_editor">
                </div>
            </div>
        </div>
        <div id="run_mode_ui" style="display: none;">
            This is run mode, <em>run</em> or <em>step through</em> your graph. You can direct the input and output (to and from) your graph below.
            <div id="graphlet">loading</div>
        </div>
        <div id="graph_out" style="display: none;">
        </div>
        <div id="graph_in" style="display: none;">
        </div>

      </div>
      </div>
    
</body>
</html>
